!function(a){var b=function(b,c){this.opts=a.extend({},this.defaultOpts,b?b:{}),this.gallery=c.addClass("Gallery"),this.setData(),this.eventsBind()};b.prototype.Tween={Quart:{easeOut:function(a,b,c,d){return-c*((a=a/d-1)*a*a*a-1)+b}},Back:{easeOut:function(a,b,c,d,e){return void 0==e&&(e=1.70158),c*((a=a/d-1)*a*((e+1)*a+e)+1)+b}},Bounce:{easeOut:function(a,b,c,d){return(a/=d)<1/2.75?c*7.5625*a*a+b:2/2.75>a?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:2.5/2.75>a?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+.984375)+b}}},b.prototype.defaultOpts={animation:"slide",shaHeight:36,hasArrow:!0,duration:40,pause:2e3,interval:10,onStart:function(){},onFinish:function(){}},b.prototype.getCss=function(a,b){if("string"==typeof b){var c=parseInt(a.css(b));return"number"==typeof c?c:!1}},b.prototype.setData=function(){var d,b="",c="";for(this.width=this.gallery.width(),this.height=this.gallery.height(),this.mounts=a("img",this.gallery).length,this.imgsContainer=a("ul",this.gallery).addClass("imgs-container").css("width",this.mounts*this.width),this.images=a("img",this.gallery).css({width:this.width,height:this.height}),this.shadow=a("div",this.gallery).addClass("shadow").css({width:this.width,height:this.opts.shaHeight}),d=1;d<=this.mounts;d++)b+='<li><a href="">'+d+"</a></li>",c+='<a href="">'+this.images.eq(d-1).attr("alt")+"</a>";this.buttons=a("ol",this.gallery).addClass("buttons").append(b),this.titles=a("p",this.gallery).addClass("titles").append(c),this.arrows=a('<a href="" class="prev-btn"><</a><a href="" class="next-btn">></a>').appendTo(this.gallery),this.target=null,this.begin=this.getCss(this.imgsContainer,"marginLeft"),this.change=-1*this.width,this.cFixed=-1*this.width,this.timer=0,this.timeId=null,this.auto=!0},b.prototype.eventsBind=function(){var b=this;a("a",b.buttons).eq(0).addClass("on"),a("a",b.titles).eq(0).addClass("curInfo"),a.each(a("a",b.buttons),function(c,d){a(d).bind("mouseover",{index:c,self:b},b.setBeforeSlide).bind("mouseleave",function(){b.auto=!0,0==b.timer&&b.setBeforeSlide()}).click(function(a){a.preventDefault()})}),b.opts.hasArrow&&(a("a.next-btn",this.gallery).bind("click",{Event:"next",self:b},this.setBeforeSlide),a("a.prev-btn",this.gallery).bind("click",{Event:"prev",self:b},this.setBeforeSlide),b.gallery.bind({mouseover:function(){b.arrows.fadeIn(300)},mouseleave:function(){b.arrows.fadeOut(100)}}).contents().not("ul,a.prev-btn,a.next-btn").not(a("ul",b.container).contents()).bind("mouseover",function(a){a.stopPropagation(),b.arrows.fadeOut(100)})),b.auto&&b.setBeforeSlide()},b.prototype.setBeforeSlide=function(a){var b,c,d,e;void 0==a?(clearTimeout(this.timeId),b=this,this.begin=this.getCss(this.imgsContainer,"marginLeft"),this.change=this.begin==(this.mounts-1)*this.cFixed?-this.begin:this.cFixed,this.alterClassName(),this.timeId=setTimeout(function(){return function(){b.slideRun()}}(),this.opts.pause)):(a.preventDefault(),b=a.data.self,clearTimeout(b.timeId),b.begin=b.getCss(b.imgsContainer,"marginLeft"),a.data.Event?(a.preventDefault(),"next"==a.data.Event?(d=b.begin/b.cFixed,b.begin!=(b.mounts-1)*b.cFixed&&(inte=d==parseInt(d)?parseInt(d)+1:parseInt(d)==b.mounts-2?parseInt(d)+1:parseInt(d)+2,c=inte*b.cFixed,b.alterClassName(inte))):0!=b.begin&&(e=parseInt(b.begin/b.cFixed-1),c=e*b.cFixed,b.alterClassName(e)),b.change=c-b.begin,b.timer=0,b.slideRun()):(e=a.data.index,b.auto=!1,b.target=e*b.cFixed,b.change=b.target-b.begin,b.timer=0,b.alterClassName(e),b.slideRun()))},b.prototype.alterClassName=function(b){if(this.buttons.find("a.on").removeClass("on"),this.titles.find(".curInfo").removeClass("curInfo"),"number"==typeof b)a("a",this.buttons).eq(b).addClass("on"),a("a",this.titles).eq(b).addClass("curInfo");else{var c=parseInt(this.begin/this.cFixed);a("a",this.buttons).eq(c).addClass("on"),a("a",this.titles).eq(c).addClass("curInfo")}},b.prototype.slideRun=function(){var b,a=this;this.timer<=this.opts.duration?(b=Math.round(this.Tween.Quart.easeOut(this.timer,this.begin,this.change,this.opts.duration)),this.imgsContainer.css("marginLeft",b+"px"),this.timer++,this.timeId=setTimeout(function(){return function(){a.slideRun()}}(),this.opts.interval)):(this.timer=0,this.auto&&this.setBeforeSlide())},a.fn.gallery=function(c){return this.each(function(){a(this).data("gallery")||a(this).data("gallery",new b(c?{}:c,a(this)))})}}(jQuery);